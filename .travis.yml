language: cpp
os: osx
osx_image: xcode12.2
env:
  global:
    - DEPLOY_VERSION=$(<version.txt)
jobs:
  include:
    - stage: linux setup
      os: linux
      dist: ubuntu
      script:
        - mkdir build
        - cd build
      addons:
        apt:
          packages:
            - glfw
            - qt
    - stage: osx setup
      os: osx
      osx_image: xcode12.2
      script:
        - brew upgrade qt
        - mkdir build
        - cd build
      addons:
        homebrew:
          packages:
            - glfw
            - qt
          update: true
    - stage: build
      script:
        - |
          ls
          cmake \
          -DQt5_DIR=$(brew --prefix qt5)/lib/cmake/Qt5 \
          ..
script:

  - ./test/ModelsUnitTests/ModelTests